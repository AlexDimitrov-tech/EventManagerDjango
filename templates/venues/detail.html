{% extends 'base.html' %}
{% load event_extras %}

{% block title %}{{ venue.name }} â€“ LocalVibe{% endblock %}

{% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'venue_list' %}">Venues</a></li>
      <li class="breadcrumb-item active">{{ venue.name }}</li>
    </ol>
  </nav>

  <div class="row">
    <div class="col-md-7">
      <h1 class="mb-1">{{ venue.name }}</h1>
      <p class="text-muted mb-3">{{ venue.city }}</p>

      <ul class="list-unstyled mb-4">
        <li class="mb-1"><strong>Address:</strong> {{ venue.address }}, {{ venue.city }}</li>
        <li class="mb-1"><strong>Capacity:</strong> {{ venue.capacity }} ({{ venue.capacity|venue_size }})</li>
        {% if venue.phone %}<li class="mb-1"><strong>Phone:</strong> {{ venue.phone }}</li>{% endif %}
        {% if venue.email %}<li class="mb-1"><strong>Email:</strong> {{ venue.email }}</li>{% endif %}
      </ul>

      <a href="{% url 'venue_edit' venue.pk %}" class="btn btn-outline-secondary btn-sm me-2">Edit Venue</a>
      <a href="{% url 'venue_delete' venue.pk %}" class="btn btn-outline-danger btn-sm">Delete</a>
    </div>

    <div class="col-md-5">
      {% if upcoming_events %}
      <h5 class="mb-3">Upcoming Events Here</h5>
      <ul class="list-group mb-4">
        {% for ev in upcoming_events %}
        <li class="list-group-item">
          <a href="{{ ev.get_absolute_url }}" class="text-decoration-none">{{ ev.title }}</a>
          <span class="float-end text-muted small">{{ ev.date }}</span>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if past_events %}
      <h5 class="mb-3 text-muted">Past Events</h5>
      <ul class="list-group">
        {% for ev in past_events %}
        <li class="list-group-item list-group-item-light">
          <a href="{{ ev.get_absolute_url }}" class="text-muted text-decoration-none">{{ ev.title }}</a>
          <span class="float-end small text-muted">{{ ev.date }}</span>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if not upcoming_events and not past_events %}
      <p class="text-muted">No events at this venue yet.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
