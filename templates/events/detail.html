{% extends 'base.html' %}
{% load event_extras %}

{% block title %}{{ event.title }} – LocalVibe{% endblock %}

{% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'event_list' %}">Events</a></li>
      <li class="breadcrumb-item active">{{ event.title }}</li>
    </ol>
  </nav>

  <div class="row">
    <div class="col-md-8">
      <h1 class="mb-2">{{ event.title }}</h1>
      <div class="mb-3">
        <span class="badge bg-{{ event.get_status_color }} me-1">{{ event.status }}</span>
        {% if event.is_free %}
        <span class="badge bg-info">Free Entry</span>
        {% endif %}
        {% if event.is_past %}
        <span class="badge bg-dark">Past Event</span>
        {% endif %}
      </div>

      {% if event.description %}
      <div class="mb-4">
        <p style="line-height: 1.7;">{{ event.description }}</p>
      </div>
      {% endif %}

      {% if event_categories %}
      <div class="mb-3">
        <strong>Categories:</strong>
        {% for cat in event_categories %}
        <span class="badge bg-secondary ms-1">{{ cat.name }}</span>
        {% endfor %}
      </div>
      {% endif %}

      <div class="d-flex gap-2 mt-4">
        <a href="{% url 'event_edit' event.pk %}" class="btn btn-outline-secondary">Edit Event</a>
        <a href="{% url 'event_delete' event.pk %}" class="btn btn-outline-danger">Delete</a>
        <a href="{% url 'event_list' %}" class="btn btn-link">← Back to list</a>
      </div>
    </div>

    <div class="col-md-4">
        <div class="card" style="border: 1px solid var(--border-color, #25253a);">
        <div class="card-body">
          <h6 style="font-size:0.75rem; letter-spacing:1px; text-transform:uppercase; color: var(--text-muted);">Event Details</h6>
          <ul class="list-unstyled mb-0">
            <li class="mb-2">
              <strong>Date:</strong> {{ event.date }}
              <span class="text-muted ms-1" style="font-size:0.85rem;">({{ event.date|days_until }})</span>
            </li>
            {% if event.time %}
            <li class="mb-2"><strong>Time:</strong> {{ event.time }}</li>
            {% endif %}
            <li class="mb-2">
              <strong>Price:</strong>
              <span class="{% if event.is_free %}text-success{% endif %}">{{ event.price|format_price }}</span>
            </li>
            {% if event.max_attendees %}
            <li class="mb-2"><strong>Max attendees:</strong> {{ event.max_attendees }}</li>
            {% endif %}
            {% if event.venue %}
            <li class="mb-2">
              <strong>Venue:</strong>
              <a href="{% url 'venue_detail' event.venue.pk %}">{{ event.venue.name }}</a>
              <div class="text-muted small">{{ event.venue.city }}</div>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
